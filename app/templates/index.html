<!-- templates/index.html -->
<html>
<head>
{#    <meta http-equiv="refresh" content="60; URL={{ url_for('index') }}">#}
    <title>Hello</title>
    <link rel="stylesheet" href="/css/bootstrap.css">
    <style type="text/css">
        .table {

        }
    </style>
</head>
<body>

<a href="{{ url_for('settings') }}"><button type="button" class="btn">Settings</button></a>

<div class="container">
    <table class="table">
        <tr>
            <td>MESSAGE</td>
        </tr>
        <tr>
            <td id="message"></td>
        </tr>
    </table>
</div>

<div id="alert"></div>

<script src="/js/jquery.js"></script>
<script src="/js/popper.js"></script>
<script src="/js/bootstrap.js"></script>
<script src="/js/socket.js"></script>

<script>

    $(document).ready(function () {
        var connected = false;
        var key = null;
        const socket = io('http://' + document.domain + ':' + location.port);

        socket.on('connect', function () {
            $('#status').text("Connected.");
            connected = true;
            console.log('connected.');
        });

        socket.on('auth', function (data) {
            $('#auth').text(data);
            socket.emit('setFingerPrintStatus', true);
        });


        socket.on('fingerPrintStatus', function (data) {
            if(data.status > 1)
                $('#message').text(data.first_name);

        });

        socket.on('disconnect', function () {
            console.log('disconnected.');
            connected = false;
            $('#status').text("Disconnected.");
        });

        setInterval(function () {
            if (connected)
                socket.emit('update');
        }, 500);

    });
</script>
</body>
</html>