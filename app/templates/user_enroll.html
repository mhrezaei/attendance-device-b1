<!doctype html>
<html xmlns:font-weight="http://www.w3.org/1999/xhtml" xmlns:margin-left="http://www.w3.org/1999/xhtml">
<head>
    <style>
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }

        th, td {
            padding: 5px;
            text-align: left;
        }
    </style>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>Result</title>
</head>
<body>
<a href="{{ url_for('settings') }}">Settings</a><br>
<a href="{{ url_for('index') }}">Home</a><br>
<h2 style="text-align: center;">User Enroll Form</h2>


<form action="{{ url_for('user_enroll') }}" method='post'>
    <fieldset>
        <legend>User Enroll Form</legend>
        {{ form.hidden_tag() }}

        <div style=font-size:20px; font-weight:bold; margin-left:150px;>
            {{ form.id.label }}<br>
            {{ form.id }}
            <br>
            {{ form.submit }}
        </div>

    </fieldset>
</form>

<br><br>

{#------------------------#}
{# Form validation errors #}
{#------------------------#}
{% for message in form.id.errors %}
    <div>{{ message }}</div>
{% endfor %}

{#------------------------#}
{# Flash messages         #}
{#------------------------#}
{% with messages = get_flashed_messages() %}
    {% if messages %}
        <ul class=flashes>
            {% for message in messages %}
                <li>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
{% endwith %}

You entered this ID: {{ the_id }}

<table style="width:100%">
    <caption>Users Table</caption>
    <tr>
        <th>ID</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Code Melli</th>
        <th>Created at</th>
        <th>Updated at</th>
        <th>Enroll Finger</th>
        <th>Enroll RFID Card</th>
    </tr>
    {% for i in range(users_table_records_count) %}
        <tr>
            <td>{{ id_list[i] }}</td>
            <td>{{ first_name_list[i] }}</td>
            <td>{{ last_name_list[i] }}</td>
            <td>{{ code_melli_list[i] }}</td>
            <td>{{ created_at_list[i] }}</td>
            <td>{{ updated_at_list[i] }}</td>
            <td>
                <button value="{{ id_list[i] }}" class="enroll-{{ id_list[i] }}" type="button"
                        onclick="findUserID('{{ id_list[i] }}');">Enroll Finger
                </button>
            </td>
            <td>
                <button value="{{ id_list[i] }}" class="enroll-{{ id_list[i] }}" type="button" onclick="">Enroll RFID
                    Card
                </button>
            </td>
        </tr>
    {% endfor %}
</table>
<script>

    function findUserID(elm) {
        var id = $('.enroll-' + elm).val();
        alert(id);
        $.ajax({
            method: 'post',
            type: 'json',
            url: '{{ url_for('user_enroll') }}'
        }).done(function (msg) {
            if (msg.status) {

            }
        })
    }


</script>
</body>
</html>
